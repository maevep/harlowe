@import '_flex';

/*
	<html> controls the background of the page.
	Given that the text colour is intimately connected to the background,
	this also controls the text colour.
	This element can be styled by setting a ChangerCommand to page.body
*/
html {
	font: 100% Georgia, serif;
	margin: 0;
	background-color: transparent;
	color: #000;
	// This allows <tw-story> to cover the entire page
	height:100%;
	overflow-x:hidden;
	
	// Use the more intuitive box model.
	box-sizing: border-box;
}
/*
	This enables border-box on every element by default, unless overridden
	by a parent element.
	It also enables position:relative by default, which allows top, left, etc.
	to be used heedlessly.
*/
*, :before, :after {
	position: relative;
	box-sizing: inherit;
}
// This is just a reset.
body {
	margin: 0;
	background-color: transparent;
	// This allows <tw-story> to cover the entire page
	height:100%;
}

/*
	<tw-storydata> houses the raw passage data of the story.
	Of course, it can't be visible.
*/
tw-storydata {
	display: none;
}

/*
	The <tw-story> element houses all of the <tw-passage>s.
*/
tw-story {
	@include flexbox;
	@include flex-direction(column);
	
	width: 100%;
	height: 100%;
	
	/*
		This is the base font size, which is
		permuted below.
	*/
	$font-size: 1.5em;
	
	font-size:   $font-size;
	line-height: $font-size;
	
	/*
		These responsive degradations are based off
		the "ideal" width of the page (1920px).
	*/
	$max-width: 1280px;
	@media screen and (max-width: $max-width * 0.8) {
		font-size: $font-size * 0.8;
	}
	@media screen and (max-width: $max-width * 0.7) {
		font-size: $font-size * 0.7;
	}
	@media screen and (max-width: $max-width * 0.6) {
		font-size: $font-size * 0.6;
	}
	/*
		The <tw-story>'s default distance from the top and bottom of the page is 5%.
	*/
	padding: 5% 20%;
	margin: 0;
}

/*
	The <tw-passage> element houses a single passage, including its sidebar.
*/
tw-passage {
	display: block;
	/*
		This fix provides more intuitive whitespace for passage text,
		and allows <tw-char> space characters to be drawn correctly.
	*/
	white-space: pre-wrap;
}

/*
	The <tw-sidebar> is the first element in a <tw-passage>, and is placed to the left
	when the story begins.
*/
tw-sidebar {
	left: -5em;
	width: 3em;
	position:absolute;
	text-align:center;
	display:block;
}

/*
	A <tw-icon> is, at present, a sidebar button.
*/
tw-icon {
	display: block;
	margin: 0.5em 0;
	opacity: 0.1;
	font-size: 2.75em;
	&:hover {
		opacity: 0.3;
	}
}

/*** Inner passage formatting ***/

/*
	These are the primary clickable game elements:
	<tw-link>  : passage links
	.link      : enchantment links
	tw-icon    : the undo button
*/

tw-error {
	display: inline-block;
	border-radius: 0.2em;
	padding: 0.2em;
	font-size: 1rem;
	cursor: help;
	&.error {
		background-color: hsla(312, 72%, 55%, 0.4); // A demure pink
	}
	&.warning {
		background-color: hsla(30, 72%, 55%, 0.4); // A stained orange
		display: none; // Only available in debug mode.
		.debug-mode & {
			display: inline;
		}
	}
}
tw-error-explanation {
	display: block;
	font-size: 0.8rem;
	line-height: 1rem;
}
tw-error-explanation-button {
	cursor: pointer;
	line-height: 0em;
	border-radius: 1px;
	border: 1px solid black;
	font-size: 0.8rem;
	margin: 0 0.4rem;
	opacity: 0.5;
	& .folddown-arrowhead {
		display:inline-block;
	}
}
tw-notifier {
	border-radius: 0.2em;
	padding: 0.2em;
	font-size: 1rem;
	background-color: hsla(45, 72%, 55%, 0.4); // A bright yellow.
	display: none; // Only available in debug mode.
	.debug-mode & {
		display: inline;
	}
	&::before {
		content: attr(message);
	}
}

/*
	When a Colour type is printed, it comes out as a <tw-colour> element.
*/
tw-colour {
	border: 1px solid black;
	display: inline-block;
	width: 1em;
	height: 1em;
}
